Objetivo:
Desplegar una infraestructura en Azure que incluya una red virtual, una subred y una máquina virtual, asegurando que la máquina virtual se despliegue solo después de que la red y la subred estén creadas.
Pasos a Seguir:
Preparación del Entorno:
Asegúrate de tener Terraform configurado para trabajar con Azure.
Organiza tu proyecto en un directorio y crea los archivos necesarios.
Definición de Recursos:
Crea un archivo main.tf donde definirás los recursos de red, subred y máquina virtual.
Define las variables necesarias como nombre de la red, nombre de la subred, etc.
Configuración de Dependencias:
Establece dependencias entre los recursos para garantizar el orden correcto de creación.
La máquina virtual debe depender de la red y la subred para asegurar que se despliegue después de ellas.
Implementación de Recursos:
Utiliza los recursos azurerm_virtual_network, azurerm_subnet y azurerm_virtual_machine para definir la red, subred y máquina virtual respectivamente.
Configura las propiedades necesarias como dirección IP, tamaño de la máquina virtual, etc.
Ejecución y Validación:
Ejecuta terraform init, terraform plan y terraform apply para desplegar la infraestructura.
Verifica en el portal de Azure que los recursos se hayan creado correctamente y que la máquina virtual esté funcionando.
Pruebas Adicionales:
Realiza pruebas adicionales como acceder a la máquina virtual, verificar conectividad de red, etc.
Experimenta modificando las dependencias para comprender su impacto en el orden de creación de recursos.